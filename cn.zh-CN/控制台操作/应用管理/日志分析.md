# 日志分析

链路追踪的日志分析功能依赖日志服务，在链路追踪控制台直接展示日志中心页面。当应用出现业务异常问题时，您可以在链路追踪控制台查看日志分析，精准定位业务异常。

-   已接入应用监控。具体操作，请参见[应用监控接入概述](/cn.zh-CN/应用监控/接入应用监控/应用监控接入概述.md)。
-   已开通日志服务SLS。登录[日志服务控制台](https://sls.console.aliyun.com)[日志服务控制台](https://partners-intl.console.aliyun.com/#/sls)，根据页面提示开通日志服务。
-   已创建Project。具体操作，请参见[创建Project](/cn.zh-CN/数据采集/准备工作/管理Project.md)。
-   已创建Logstore，具体操作，请参见[创建Logstore](/cn.zh-CN/数据采集/准备工作/管理Logstore.md)。
-   **已经将应用的业务日志上报到日志服务，具体操作，请参见[采集方式](/cn.zh-CN/数据采集/采集方式.md)。**

## 步骤一：关联业务日志

1.  登录[链路追踪Tracing Analysis控制台](https://tracing.console.aliyun.com/)。

2.  在左侧导航栏中单击**应用列表**。

3.  在应用列表页面顶部选择地域，然后单击目标应用名称。

4.  在左侧导航栏中单击**应用设置**，并在右侧单击自定义配置页签。

5.  在自定义配置页签的**业务日志关联设置**区域，绑定Project和Logstore，设置关联索引。

    **说明：**

    关联索引用于检索TraceID，查看链路对应的日志。

    -   如果日志服务中配置的索引为全文索引，此处设置关联索引为全文索引。
    -   如果日志服务中配置的索引为`traceId`的字段索引，此处设置关联索引为对应的`traceId`的索引。在日志中打印TraceID的操作，可以查看对应的链路追踪框架的TraceID打印功能说明。
    配置索引的操作，请参见[配置索引](/cn.zh-CN/查询和分析/配置索引.md)。

6.  在自定义配置页签左下角单击**保存**。


## 步骤二：查询并分析日志

1.  登录[链路追踪Tracing Analysis控制台](https://tracing.console.aliyun.com/)。

2.  在左侧导航栏中单击**应用列表**。

3.  在应用列表页面顶部选择地域，然后单击目标应用名称。

4.  在左侧导航栏，单击**日志分析**。

5.  在右侧页面，执行以下操作：

    1.  在搜索框中输入查询分析语句。

        查询分析语句由查询语句和分析语句构成，格式为查询语句\|分析语句，查询分析语句语法请参见[查询语法](/cn.zh-CN/查询和分析/查询语法与功能/查询语法.md)、[SQL分析语法](/cn.zh-CN/查询和分析/SQL分析语法与功能/通用聚合函数.md)。

    2.  设置查询分析的时间范围。

        您可以设置相对时间、整点时间和自定义时间。

        **说明：** 查询结果有1分钟以内的误差。

    3.  单击**查询/分析**，查看查询分析结果。

    ![链路追踪日志分析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3281609161/p266522.png)


